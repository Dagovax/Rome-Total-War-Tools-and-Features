# Rome:Total War -- Sprite Generator
A tool to generate sprites for modders created by Dagovax

## Installation
Download the [latest](https://github.com/Dagovax/Rome-Total-War-Tools-and-Features/blob/master/RTWSpriteGenerator/RTW%20Sprite%20Generator.exe) executable from this folder, and place it in your Rome: Total War root directory

<B>NOTE:</B> Can also be placed inside Rome Total War: Alexander folder.

## Usage
This section describes how to use the Sprite Generator tool

Run the executable as <B>administrator</B> to prevent issues

![image](https://user-images.githubusercontent.com/73654944/111209046-cda61100-85cb-11eb-892d-9b8f83239b43.png)

When you launch it for the first time, this message will show up. Click the OK button.

### Screen 1
The first screen will show up, in which you can select the installed mod you want to generate sprites for.
In this example, I will select my under development mod 'Star Wars: Total War' from the list.

![image](https://user-images.githubusercontent.com/73654944/111203944-e6abc380-85c5-11eb-846b-3b86e32a056f.png)

After the desired mod is selected, click the golden arrow to go to the next screen.

### Screen 2
Now, a bigger screen shows up, looking like this:

![image](https://user-images.githubusercontent.com/73654944/111204397-5cb02a80-85c6-11eb-9459-1e2dda5ce2e0.png)

This screen is the second and final screen on which you need to give certain properties.
In the sections below, I will explain for each section what its function is and what to do with it.

### Application Settings
![image](https://user-images.githubusercontent.com/73654944/111204802-c0d2ee80-85c6-11eb-9f77-d75f05b3b3da.png)

The application settings contains currently only one option you can check/uncheck. In the future, more settings might be posted here.
These settings will provide information on how the application will function.

#### --> ☒ Enable autocomplete for target options
If this option is checked to true, the editable fields under <I>Method 1: Range</I> will search for existing DMB type entries.
As by default, this option is unchecked due to unknown performance by endusers.

### Generation Settings
![image](https://user-images.githubusercontent.com/73654944/111205296-625a4000-85c7-11eb-9e89-c4d4d74bd7ea.png)

Generation settings are settings used specificly for generation of the sprites. As feedback from different modders, these different options are available. Just like the application settings,
the generation settings are also saved upon exit. 

#### --> ☒ Delete . tga files after conversion
With this option checked, the Sprite Generator will automatically delete .tga files after the conversion into .tga.dds file format is completed. Use this option when you don't want duplicate
images (the game generates .tga files, and the tool will convert them into .tga.dds).

#### --> ☒ Delete existing .spr, .tga and .tga.dds of selection before generating new ones
If this checkbox is checked, the Sprite Generator will search for existing files <B>using the DMB type name</B> inside the @mod/data/sprites folder, and delete them before the generation process starts.

#### --> ☒ Add sprite lines to DMB of the generated sprites (overwrites existing ones)
This option is quite advanced. The Sprite Generator will recreate the DMB file with the new sprite lines generated by the game. Unlike older versions of the tool, now even the comments are saved.
Before the Sprite Generator overwrites the existing descr_model_battle.txt, it will be saved as backup. With this option enabled, you won't need to add the sprite lines yourself!

<B>NOTE:</B> Although an automatic backup is created, if this failed, the old descr_model_battle.txt
might be gone. So make a backup yourself of descr_model_battle.txt before using this Sprite Generator to be sure you won't lose any data).

#### --> ☒ Use 'no_faction' for mercenary units
Quite simple. If this option is checked and the selected DMB type has a mercenary texture line, the Sprite Generator will use the <I>no_faction</I> attribute
for the mercenary unit.

<B>NOTE:</B> The Sprite Generator will always generate a sprite for no_faction, no matter if this option is set to true or false. This is done to prevent issues with units without 
an texture line. All selected DMB entries will therefore have a no_faction sprite (and this will also be set in DMB when that option is checked).

#### --> ☒ Force the use of lowest LOD
While working with sprites, I noted that the game doesn't generate sprites of models which are too big. For some mods (including my own), this options will be usefull.
It will create another backup of DMB, and set all DMB types' model_flexi lines to the lowest LOD. After the Sprite Generator is finished, the old DMB will be placed back.

#### --> ☒ Delete sprite_script.txt after completion
This option will delete the generated sprite_script.txt when the Sprite Generator is done.

### Debug Information
![image](https://user-images.githubusercontent.com/73654944/111207382-d990d380-85c9-11eb-8b35-a77e03af4992.png)

During the process, some helpfull messages will be shown in the message board. 

There is also a more detailed Log available after the Sprite Generator crashed or completed. You can find the log inside the <B>Rome: Total War/Dagovax_Logs/RTWSpriteGenerator</B> folder!

### Methods
![image](https://user-images.githubusercontent.com/73654944/111207954-7ce1e880-85ca-11eb-9c78-832009c3543c.png)

On the right side of the screen, you can see <U>three</U> different methods you can use to generate sprites with.

When you select a method, the others are automaticly disabled, so you can only choose one method!

#### Method 1: Range
![image](https://user-images.githubusercontent.com/73654944/111207651-2d032180-85ca-11eb-9c9d-3033c90e1ae9.png)

You can define a range here, from wich you want to generate sprites. By default, the first and the last entry of your chosen mod's DMB are defined.
You can leave one or both of the editable fields empty. The result of it is shown in the description.

If you need to generate a lot of sprites from a certain period or faction, this method might be usefull for you.

<B>Tip!</B> Check the <I>Enable autocomplete for target options</I> checkbox under the Application Settings to get an autocomplete list while typing.

#### Method 2: Selection
![image](https://user-images.githubusercontent.com/73654944/111208381-f37ee600-85ca-11eb-8fa0-3efd6bee229a.png)

This method will be the most used one. You can select in the list on the left the DMB types you want to generate sprites for.
On the right, the list of selected units will be shown. The Sprite Generator will generate sprites for the green units only.

#### Method 3: Auto Detect
![image](https://user-images.githubusercontent.com/73654944/111208585-3b057200-85cb-11eb-8f1a-defd1af5075b.png)

The third method is Auto Detect. It will search your DMB for all entries without a certain sprite. Even a DMB entry with only for one missing sprite (added a texture line for a certain faction),
will be listed.

<B>It might take a while for the application to search for each missing sprite, as it will loop through both your DMB and the sprites folder!</B>

## Generating the sprites

When you are done setting up your options, click the ```Generate Sprites``` button.

![image](https://user-images.githubusercontent.com/73654944/111209308-2675a980-85cc-11eb-8001-92be6cae8cb8.png)

The actions will be performed. Please wait until the Sprite Generator is completed. 
The Sprite Generator will check which sprites were generated:

![image](https://user-images.githubusercontent.com/73654944/111209857-d64b1700-85cc-11eb-9f8d-7b726a3b283a.png)

If you encounted such messages, it probably means that your model is too big. See the log for more details.

If you don't see this message, the game created all the sprites and the message shows up that the Sprite Generator is completed.

<B> Then click the OK button, and either see the log for more details, or test the sprites ingame! </B>

